{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","utils/Api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/Auth.js","components/ProtectedRoute.js","components/Register.js","components/Login.js","images/RegisterOk.svg","images/RegisterError.svg","components/InfoToolTip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","children","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","userId","isLiked","likes","some","id","src","link","alt","name","onClick","onCardClick","type","style","visibility","onCardDelete","onCardLike","length","Main","cards","userAvatar","onEditAvatar","userName","onEditProfile","userDescription","isAddPlacePopupOpen","map","_id","Footer","ImagePopup","isOpen","closeAllPopups","PopupWithForm","onSubmit","title","buttonName","api","config","this","_baseUrl","baseUrl","_headers","headers","fetch","method","then","_checkStatusOK","userData","body","JSON","stringify","about","cardId","avatarLink","avatar","res","ok","json","Promise","reject","status","localStorage","getItem","EditProfilePopup","useState","setName","description","setDescription","useEffect","onClose","e","preventDefault","onUpdateUser","minLength","maxLength","required","placeholder","value","onChange","target","EditAvatarPopup","avatarLinkRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","namePlaceRef","linkPlaceRef","onAddPlace","BASE_URL","resStatus","ProtectedRoute","Component","component","rest","render","loggedIn","to","Register","onReg","emailInput","setEmailInput","passwordInput","setpasswordInput","history","useHistory","push","setResStatus","catch","err","console","log","finally","onInfoTool","Login","onLog","setPasswordInput","resetInputs","InfoToolTip","registerOk","registerError","textAlign","fontSize","paddingBottom","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","selectCard","setLoggedIn","email","setEmail","isInfoToolTipOpen","setIsInfoToolTipOpen","userInfo","setUserInfo","setCards","auth","jwt","token","onSignOut","removeItem","all","getUserInfo","getInitialCards","initialCards","closeByEscape","key","document","addEventListener","removeEventListener","location","useLocation","Provider","pathname","paddingRight","headerLogStatus","path","select","likeCard","newCard","c","deleteCard","filter","password","Auth","statusCode","Error","setItem","updateUserInfo","data","setAvatar","placeData","createNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.64e8a74f.chunk.js","sourcesContent":["import React from 'react';\r\n\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <header className=\"header\">\r\n            <div className=\"header__logo\"></div>\r\n            {props.children}\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\n\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n// import { RiHeartFill } from \"react-icons/ri\";\r\n\r\nfunction Card(props) {\r\n    function handleClick() {\r\n        props.onCardClick(props.card);\r\n    }\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = props.card.owner === currentUser.userId;\r\n    const isLiked = props.card.likes.some((id) => id === currentUser.userId);\r\n    // console.log(currentUser.userId);\r\n    // console.log(props.card.owner);\r\n   \r\n    return ((\r\n        <li className=\"element\">\r\n            <img className=\"element__image\" src={props.card.link} alt={props.card.name} onClick={handleClick} />\r\n            <button className=\"element__remove-button\" type=\"button\" style={isOwn ? { visibility: 'visible' } : { visibility: 'hidden' }}\r\n                onClick={() => props.onCardDelete(props.card)}></button>\r\n            <div className=\"element__heading\">\r\n                <p className=\"element__title\">{props.card.name}</p>\r\n                <div className=\"element__container\">\r\n                    <button className={isLiked ? \"element__heart element__heart_active\" : \"element__heart element__heart_disabled\"} \r\n                    type=\"button\" onClick={() => {\r\n                        props.onCardLike(props.card)\r\n                    }}></button>\r\n                    {/* <Heart /> */}\r\n                    <p className='element__counter'>{props.card.likes.length}</p>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    ));\r\n};\r\n\r\nexport default Card;\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport Card from './Card'\r\n\r\nimport { useContext } from \"react\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\n\r\nfunction Main(props) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n    const cards = props.cards\r\n    // console.log(currentUser.userDescription);\r\n    return (\r\n        <main>\r\n            <section className=\"profile\">\r\n                <div className=\"profile__avatar-container\">\r\n                    <img src={currentUser.userAvatar} className=\"profile__avatar\" alt=\"Аватар пользователя\" onClick={props.onEditAvatar}/>\r\n                    <button className=\"profile__edit-avatar\" type=\"button\" onClick={props.onEditAvatar}></button>\r\n                </div>\r\n                <div className=\"profile__info\">\r\n                    <h1 className=\"profile__title\">{currentUser.userName}</h1>\r\n                    <button className=\"profile__edit-button\" type=\"button\" onClick={props.onEditProfile}></button>\r\n                    <p className=\"profile__subtitle\">{currentUser.userDescription}</p>\r\n                </div>\r\n                <button className=\"profile__add-button\" type=\"button\" onClick={props.isAddPlacePopupOpen}></button>\r\n            </section>\r\n\r\n            <section className=\"elements\">\r\n                <ul className=\"elements__list\">\r\n                    {cards.map((card) => {\r\n                        \r\n                        return (\r\n                            <Card card={card} key={card._id} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} />\r\n                        )\r\n                    })}\r\n                </ul>\r\n            </section>\r\n        </main>)\r\n}\r\n\r\nexport default Main;\r\n\r\n\r\n\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (\r\n    <footer className=\"footer\">\r\n\r\n        <p className=\"footer__copyright\">&copy; Mesto Russia</p>\r\n    </footer>);\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n    return ((\r\n        <div className={props.isOpen ? `popup popup_opened popup_type_${props.name}` : `popup popup_type_${props.name}`}>\r\n            <div className=\"popup__image-container container\">\r\n                \r\n                <button className=\"popup__close-button popup__close-button_type_image\" type=\"button\" onClick={props.closeAllPopups}></button>\r\n                <img className=\"popup__image\" src={props.card.link} alt={props.card.name} />\r\n                <p className=\"popup__title popup__title_type_image\">{props.card.name}</p>\r\n            </div>\r\n        </div>\r\n    ));\r\n};\r\n\r\nexport default ImagePopup;","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n    return ((\r\n        <div className={props.isOpen ? `popup popup_type_${props.name} popup_opened ` : `popup popup_type_${props.name}`} >\r\n            <form className=\"popup__container container\" name={props.name}  onSubmit={props.onSubmit}>\r\n                <h3 className=\"popup__title\">{props.title}</h3>\r\n                {props.children}\r\n                <button className=\"popup__save-button\" type=\"submit\">{props.buttonName}</button>\r\n                <button className=\"popup__close-button\" type=\"button\" onClick={props.closeAllPopups}></button>\r\n            </form>\r\n        </div>\r\n    ));\r\n};\r\n\r\nexport default PopupWithForm;"," class Api {\r\n     constructor(config) {\r\n         this._baseUrl = config.baseUrl;\r\n         this._headers = config.headers;\r\n     }\r\n\r\n     getInitialCards() {\r\n         return fetch(`${this._baseUrl}/cards`, {\r\n                 method: \"GET\",\r\n                 headers: this._headers,\r\n             })\r\n             .then(this._checkStatusOK);\r\n     }\r\n\r\n     getUserInfo() {\r\n         return fetch(`${this._baseUrl}/users/me`, {\r\n                 method: \"GET\",\r\n                 headers: this._headers,\r\n             })\r\n             .then(this._checkStatusOK);\r\n     }\r\n     updateUserInfo(userData) {\r\n         return fetch(`${this._baseUrl}/users/me`, {\r\n                 method: \"PATCH\",\r\n                 headers: this._headers,\r\n                \r\n                 body: JSON.stringify({\r\n                     name: userData.name,\r\n                     about: userData.about\r\n                 })\r\n             })\r\n             .then(this._checkStatusOK);\r\n     }\r\n     deleteCard(cardId) {\r\n         return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n                 method: \"DELETE\",\r\n                 headers: this._headers,\r\n             })\r\n             .then(this._checkStatusOK);\r\n     }\r\n\r\n     setAvatar(avatarLink) {\r\n         return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n                 method: \"PATCH\",\r\n                 headers: this._headers,\r\n                 body: JSON.stringify({\r\n                     avatar: avatarLink\r\n                 })\r\n             })\r\n             .then(this._checkStatusOK);\r\n     }\r\n\r\n     likeCard(cardId, isLiked) {\r\n         \r\n         return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\r\n                 method: isLiked ? \"DELETE\" : \"PUT\",\r\n                 headers: this._headers,\r\n             })\r\n             .then(this._checkStatusOK);\r\n     }\r\n     createNewCard({ name, link }) {\r\n         return fetch(`${this._baseUrl}/cards`, {\r\n                 method: \"POST\",\r\n                 headers: this._headers,\r\n                 body: JSON.stringify({\r\n                     name: name,\r\n                     link: link\r\n                 })\r\n             })\r\n             .then(this._checkStatusOK);\r\n     }\r\n\r\n     _checkStatusOK(res) {\r\n         if (res.ok) {\r\n             return res.json();\r\n         }\r\n         return Promise.reject(`Ошибка ${res.status}`);\r\n     }\r\n }\r\n\r\n\r\n const api = new Api({\r\n     baseUrl: \"http://localhost:3000\",\r\n     headers: {\r\n         \"Content-Type\": \"application/json\",\r\n         \"Authorization\": `Bearer ${localStorage.getItem(\"jwt\")}`\r\n     },\r\n });\r\n\r\n export default api;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction EditProfilePopup(props) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState(currentUser.userName);\r\n    const [description, setDescription] = React.useState(currentUser.userDescription);\r\n  \r\n    // const [name, setName] = React.useState('');\r\n    // const [description, setDescription] = React.useState('');\r\n\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.userName);\r\n        setDescription(currentUser.userDescription);\r\n    }, [currentUser, props.isOpen]);\r\n\r\n    function handleChangeName(e) {\r\n         setName(e.target.value);\r\n    }\r\n    function handleChangeDescription(e) {\r\n         setDescription(e.target.value);\r\n    }\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n         props.onUpdateUser({\r\n             name: name,\r\n             about: description,\r\n         });\r\n    }\r\n\r\n    return ((\r\n        <PopupWithForm name=\"user-data\" title=\"Редактировать профиль\" buttonName=\"Сохранить\" isOpen={props.isOpen} closeAllPopups={props.onClose} onSubmit={handleSubmit}>\r\n            <input id=\"name-input\" className=\"popup__text popup__text_type_name\" \r\n            type=\"text\" name=\"name\" minLength=\"2\" maxLength=\"40\" required placeholder=\"Имя\"\r\n                value={name || ''} onChange={handleChangeName} />\r\n            <span className=\"popup__error name-input-error\" id=\"name-input-error\"></span>\r\n            <input id=\"profession-input\" className=\"popup__text popup__text_type_profession\" \r\n            type=\"text\" name=\"profession\" minLength=\"2\" maxLength=\"200\" required placeholder=\"Профессия\"\r\n                value={description || ''} onChange={handleChangeDescription}/>\r\n            <span className=\"popup__error profession-input-error\" id=\"profession-input-error\"></span>\r\n        </PopupWithForm>\r\n    ));\r\n};\r\n\r\nexport default EditProfilePopup;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n    const avatarLinkRef = useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        props.onUpdateAvatar({\r\n            avatar: avatarLinkRef.current.value\r\n        });\r\n    }\r\n\r\n    return ((\r\n        <PopupWithForm name=\"update-avatar\" title=\"Обновить аватар\" buttonName=\"Сохранить\" isOpen={props.isOpen} closeAllPopups={props.onClose} onSubmit={handleSubmit}>\r\n            <input id=\"avatar-input\" type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" className=\"popup__text popup__text_type_source\" required ref={avatarLinkRef}/>\r\n            <span className=\"popup__error avatar-input-error popup__error_avatar\"></span>\r\n        </PopupWithForm>\r\n\r\n        \r\n    ));\r\n};\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport { useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction AddPlacePopup(props) {\r\n    const namePlaceRef = useRef();\r\n    const linkPlaceRef = useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onAddPlace({\r\n            link: linkPlaceRef.current.value,\r\n            name: namePlaceRef.current.value,\r\n        });\r\n        namePlaceRef.current.value = ''\r\n        linkPlaceRef.current.value = ''\r\n    }\r\n\r\n    return ((\r\n        <PopupWithForm name=\"place-data\" title=\"Новое место\" buttonName=\"Сохранить\" isOpen={props.isOpen} closeAllPopups={props.onClose} onSubmit={handleSubmit}>\r\n            <input id=\"place-input\" className=\"popup__text popup__text_type_place\" placeholder=\"Название\" type=\"text\" name=\"name\" minLength=\"2\" maxLength=\"30\" required ref={namePlaceRef}/>\r\n            <span id=\"place-input-error\" className=\"popup__error place-input-error\"></span>\r\n            <input id=\"url-input\" type=\"url\" name=\"link\" placeholder=\"Ссылка на картинку\" className=\"popup__text popup__text_type_source\" required ref={linkPlaceRef}/>\r\n            <span className=\"popup__error url-input-error\"></span>\r\n        </PopupWithForm>\r\n    ));\r\n};\r\n\r\nexport default AddPlacePopup;\r\n\r\n\r\n\r\n","export const BASE_URL = \"http://localhost:3000\";\r\n\r\nconst resStatus = (res) => {\r\n    if (!res.ok) {\r\n        return Promise.reject(`Error: ${res.status}`);\r\n    }\r\n    return res.json();\r\n};\r\n\r\nexport const register = (password, email) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ password, email }),\r\n    }).then(resStatus);\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": `Bearer ${localStorage.getItem(\"jwt\")}`\r\n        },\r\n        body: JSON.stringify({ password, email }),\r\n    }).then(resStatus);\r\n};\r\n\r\nexport const getContent = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Authorization\": `Bearer ${token}`\r\n        },\r\n    }).then(resStatus);\r\n};","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...rest }) => {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) =>\r\n                rest.loggedIn === true ? (\r\n                    <Component {...props} {...rest} />\r\n                ) : (\r\n                    <Redirect to=\"./sign-in\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nconst Register = ({ onReg, ...props }) => {\r\n    const [emailInput, setEmailInput] = React.useState('');\r\n    const [passwordInput, setpasswordInput] = React.useState('');\r\n    const history = useHistory();\r\n\r\n    function handleChangeEmailInput(e) {\r\n        setEmailInput(e.target.value);\r\n    }\r\n    function handleChangePasswordInput(e) {\r\n        setpasswordInput(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        // console.log('hello');\r\n        e.preventDefault();\r\n        onReg({ passwordInput, emailInput })\r\n            .then(() => {\r\n                history.push(\"/sign-in\");\r\n                props.setResStatus(true);\r\n               })\r\n            .catch((err) => {\r\n                props.setResStatus(false);\r\n                console.log(err);\r\n            })\r\n            .finally(() => {\r\n                props.onInfoTool(true);\r\n            });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem(\"jwt\")) {\r\n            history.push(\"/main\");\r\n        }\r\n    }, [history]);\r\n\r\n    return ((\r\n        <form className=\"auth\" onSubmit={handleSubmit}>\r\n            <h2 className=\"auth__title\">Регистрация</h2>\r\n            <input className=\"auth__input\" type=\"email\"\r\n                placeholder=\"Email\"\r\n                minLength=\"2\" maxLength=\"40\"\r\n                required value={emailInput} onChange={handleChangeEmailInput} />\r\n            <input className=\"auth__input\" type=\"text\"\r\n                placeholder=\"Пароль\"\r\n                minLength=\"8\" maxLength=\"40\"\r\n                required value={passwordInput} onChange={handleChangePasswordInput} />\r\n            <button className=\"auth__confirm-button\" type=\"submit\">Зарегистрироваться</button>\r\n            {props.children}\r\n        </form>\r\n    ));\r\n};\r\n\r\nexport default Register;","import React, { useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Login = ({ onLog, ...props }) => {\r\n    const [emailInput, setEmailInput] = React.useState('');\r\n    const [passwordInput, setPasswordInput] = React.useState('');\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (localStorage.getItem(\"jwt\")) {\r\n                history.push(\"/main\");\r\n            }\r\n        }\r\n    }, [history]);\r\n\r\n       function handleChangeEmailInput(e) {\r\n        setEmailInput(e.target.value);\r\n    }\r\n    function handleChangePasswordInput(e) {\r\n        setPasswordInput(e.target.value);\r\n    }\r\n    const resetInputs = () => {\r\n        setEmailInput('');\r\n        setPasswordInput('');\r\n    };\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        onLog({ passwordInput, emailInput })\r\n            .then(resetInputs)\r\n            .then(() => {\r\n                history.push(\"/main\");\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n       return (\r\n                   <form className=\"auth\" onSubmit={handleSubmit}>\r\n                <h2 className=\"auth__title\">Вход</h2>\r\n                <input className=\"auth__input\" type=\"email\"\r\n                    placeholder=\"Email\"\r\n                    required value={emailInput} onChange={handleChangeEmailInput}\r\n                    minLength=\"8\" maxLength=\"40\"\r\n                     />\r\n                <input className=\"auth__input\" type=\"text\"\r\n                    placeholder=\"Пароль\"\r\n                    minLength=\"8\" maxLength=\"40\"\r\n                    required value={passwordInput} onChange={handleChangePasswordInput} />\r\n                <button className=\"auth__confirm-button\" type=\"submit\">Войти</button>\r\n                {props.children}\r\n            </form>\r\n           );\r\n};\r\n\r\nexport default Login;","export default __webpack_public_path__ + \"static/media/RegisterOk.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/RegisterError.df8eddf6.svg\";","import React from 'react';\r\nimport registerOk from \"../images/RegisterOk.svg\";\r\nimport registerError from \"../images/RegisterError.svg\";\r\n\r\nfunction InfoToolTip(props) {\r\n    \r\n    return ((\r\n        < div className={props.isOpen ? `popup popup_opened popup_type_success` : `popup popup_type_success`} >\r\n            <div className=\"popup__container\" name={props.name} >\r\n                <img\r\n                    className=\"popup__icon\"\r\n                    src={props.resStatus ? registerOk : registerError}\r\n                    alt=\"approved\"\r\n                />\r\n                <h2 className=\"popup__title\" style={{ textAlign: 'center', fontSize: '20px', paddingBottom: '0' }}>\r\n                    {props.resStatus ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h2>\r\n                <button className=\"popup__close-button\" type=\"reset\" onClick={props.closeAllPopups}></button>\r\n            </div>\r\n        </div >\r\n    ));\r\n};\r\n\r\nexport default InfoToolTip;","// serve - s build\n// npm start\nimport { Route, Link, Redirect, Switch, useHistory, useLocation } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport api from \"../utils/Api.js\";\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nimport * as Auth from '../utils/Auth';\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Register from \"./Register\";\nimport Login from './Login.js';\nimport InfoToolTip from './InfoToolTip';\n\n// email@mail.com\n// 12345\n\nfunction App(props) {\n   \n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n    const [selectedCard, selectCard] = React.useState({});\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const history = useHistory();\n    const [email, setEmail] = useState(\"\");\n    const [isInfoToolTipOpen, setIsInfoToolTipOpen] = React.useState(false);\n\n    const [userInfo, setUserInfo] = React.useState({});\n    const [cards, setCards] = React.useState([]);\n    const [resStatus, setResStatus] = React.useState(false);\n\n    const auth = (jwt) => {\n        return Auth.getContent(jwt).then((res) => {\n            if (res) {\n                setLoggedIn(true);\n                \n                setEmail(res.email);\n            }\n        })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n\n    useEffect(() => {\n        const jwt = localStorage.getItem(\"jwt\");\n\n        if (jwt) {\n            auth(jwt);\n        }\n    }, [loggedIn]);\n\n    useEffect(() => {\n        if (loggedIn) history.push(\"/main\");\n    }, [loggedIn, history]);\n\n    const onReg = ({ passwordInput, emailInput }) => {\n        return Auth.register(passwordInput, emailInput).then((res) => {\n            if (!res || res.statusCode === 400) {\n                throw new Error(\"Что-то пошло не так\");\n            } else\n                return res;\n        })\n    };\n\n    const onLog = ({ passwordInput, emailInput }) => {\n        return Auth.authorize(passwordInput, emailInput).then((res) => {\n            if (!res || !res.token)\n                throw new Error(\"Неправильные имя пользователя или пароль\");\n            if (res.token) {\n                setLoggedIn(true);\n                localStorage.setItem(\"jwt\", res.token);\n            }\n        })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n\n    const onSignOut = () => {\n        localStorage.removeItem(\"jwt\");\n        setLoggedIn(false);\n        history.push(\"/sign-in\");\n    };\n\n    \n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    };\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    };\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    };\n    function handleCardClick(select) {\n        selectCard(select);\n        setIsImagePopupOpen(true);\n    };\n\n    function closeAllPopups() {\n        setIsEditAvatarPopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsImagePopupOpen(false);\n        setIsInfoToolTipOpen(false);\n    };\n    \n    \n    // console.log(userInfo);\n    React.useEffect(() => {\n        \n        Promise.all([api.getUserInfo(), api.getInitialCards()])\n            .then(([userData, initialCards]) => {\n                console.log(userData);\n                setUserInfo({\n                    userName: userData.name,\n                    userDescription: userData.about,\n                    userAvatar: userData.avatar,\n                    userId: userData._id\n                });\n                setCards(initialCards);\n                \n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }, [history]);\n\n    React.useEffect(() => {\n        const closeByEscape = (e) => {\n            if (e.key === 'Escape') {\n                closeAllPopups();\n            }\n        }\n\n        document.addEventListener('keydown', closeByEscape)\n\n        return () => document.removeEventListener('keydown', closeByEscape)\n    }, [])\n\n\n\n    function handleCardLike(card) {\n        // console.log('hi');\n        const isLiked = card.likes.some((id) => id === userInfo.userId);\n\n        api.likeCard(card._id, isLiked)\n        .then((newCard) => {\n            setCards((cards) => cards.map((c) => (c._id === card._id ? newCard : c)));\n        })\n        .catch((err) => {\n                console.log(err);\n        });\n        \n    };\n\n    function handleCardDelete(card) {\n        api.deleteCard(card._id)\n        .then(() => {\n            setCards((cards) => cards.filter((c) => c._id !== card._id));\n        })\n        .catch((err) => {\n                console.log(err);\n        });\n        \n    };\n\n    function handleUpdateUser(userData) {\n        api.updateUserInfo(userData)\n            .then((userData) => {\n                console.log(userData);\n                setUserInfo({\n                    userName: userData.data.name,\n                    userDescription: userData.data.about,\n                    userAvatar: userData.data.avatar,\n                    userId: userData.data._id,\n                });\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n\n    function handleUpdateavatar(userData) {\n               api.setAvatar(userData.avatar)\n            .then((userData) => {\n                console.log(userData);\n                setUserInfo({\n                    userName: userData.name,\n                    userDescription: userData.about,\n                    userAvatar: userData.avatar,\n                    userId: userData._id,\n                });\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n\n    function handleAddPlace(placeData) {\n        api.createNewCard(placeData)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    };\n\n    const location = useLocation();\n\n    function headerLogStatus() {\n        switch (location.pathname) {\n            case '/main':\n                return (\n                    <div className='header__auth'>\n                        <p className='header__email' style={{ paddingRight: '24px' }}>{email}</p>\n                        <Link className=\" auth__link\" to=\"/sign-up\" onClick={onSignOut}>Выйти</Link>\n                    </div>\n                )\n\n            case '/sign-in':\n                return (\n                    <div className='header__auth'><Link className=\" auth__link\" to=\"/sign-up\">Регистрация</Link></div>\n                )\n\n            case '/sign-up':\n                return (\n                    <div className='header__auth'><Link className=\" auth__link\" to=\"/sign-in\">Войти</Link></div>\n                )\n\n            default:\n                break;\n        }\n    }\n\n   \n    return ((\n        <div className=\"page\">\n            <CurrentUserContext.Provider value={userInfo}>\n                    <Header>\n                        {headerLogStatus()}\n                        </Header>\n                    <Switch>\n                        <ProtectedRoute \n                        path=\"/main\"\n                            loggedIn={loggedIn}\n                        component={Main} cards={cards} onEditProfile={handleEditProfileClick} isAddPlacePopupOpen={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick} card={selectedCard} onCardLike={handleCardLike} onCardDelete={handleCardDelete} onSignOut={onSignOut} />\n                        <Route path=\"/sign-up\">\n                            <Register onReg={onReg} onInfoTool={setIsInfoToolTipOpen} setResStatus={setResStatus}>\n                                <p className=\"auth__span\">Уже зарегистрированы?<Link className=\"auth__span auth__link\" to=\"/sign-in\">  Войти</Link></p>\n                            </Register>\n                        </Route>\n                        <Route path=\"/sign-in\">\n                            <Login loggedIn={loggedIn} setLoggedIn={setLoggedIn} onLog={onLog} />\n                        </Route>\n                        <Route>\n                            {loggedIn ? (<Redirect to=\"/main\" />) : (<Redirect to=\"/sign-in\" />)}\n                        </Route>\n                    </Switch>\n\n                <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} closeAllPopups={closeAllPopups} />\n\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n\n                <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateavatar} />\n\n                <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlace} />\n\n                <PopupWithForm name=\"approval\" title=\"Вы уверены?\" buttonName=\"Да\" isOpen={false} />\n\n                <InfoToolTip isOpen={isInfoToolTipOpen} closeAllPopups={closeAllPopups} resStatus={resStatus} />\n                \n                    <Footer />\n               \n            </CurrentUserContext.Provider>\n        </div>\n    ));\n}\nexport default App;\n\n\n\n\n\n\n\n\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </React.StrictMode> , document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}